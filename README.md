# MyChatGPT

MyChatGPT is a project that allows integration of OpenAI's ChatGPT into the Second Life virtual world. With this setup, you can communicate in Second Life via chat commands. The responses generated by ChatGPT are relayed back to the Second Life environment.

## Files in this Repository

- `MyChatGPT.lsl`: This is a Second Life LSL script. It listens for chat commands starting with `/chatgpt` and sends the message following the command to the Python server for processing.

- `lslserver.py`: This Python server uses Flask to accept HTTP requests from the LSL script. It processes the requests using OpenAI's ChatGPT API to generate responses.

## Setup and Installation

1. Ensure you have Python 3 installed. You can download it [here](https://www.python.org/downloads/).

2. Install the required Python packages:

    ```bash
    pip install Flask openai python-dotenv langchain 
    ```

3. Clone this repository to your local machine.

4. Set up an OpenAI account and obtain your API key.

5. Create a `.env` file in the project root directory and add your OpenAI API key like so:

    ```bash
    OPENAI_API_KEY=your_key_here
    OPENAI_ORGANIZATION=your_key_here
    ```
    
6. Create a `data.pkl` file in the root directory and run `pickleload.py` to allow the server to interact with data.pkl

7. Create a `conversations.db` file in the root directory - this will store user conversations

### Implementing Access to Server URL from Any Location
* For first time use, follow the steps found in this video [here](https://www.youtube.com/watch?v=z5XiVh6v4uI&ab_channel=VincentStevenson). Written steps can be found in the description below the video. Note Ubuntu is being used as the OS, so be aware of the difference in syntax if Linux is being used instead.

8. Run the Python server:

    ```bash
    python3 lslserver.py
    ```


9. Upload the `MyChatGPT.lsl` script to Second Life and attach it to an object.

10. Replace the URL in `MyChatGPT.lsl` with your Python server's URL.
    
11. Update the top of the lsl script your corresponding userId

## Usage
Once you're in Second Life, type a message in the local chat near the object with the LSL script starting with `/chatgpt`, followed by your question or statement. The ChatGPT-powered NPC will respond accordingly.
Responses will remind you how many user messages you've used in the conversation. Current limits are unknown, but it's reccomended to use '/chatgpt clear' to clear the conversation history. 

## Starting Up Server After First Use
1. Use commands `cd helloworld` to go into directory and `source venv/bin/activate` to activate virtual environment
2. Use `sudo systemctl start helloworld` and `sudo systemctl enable helloworld` to enable gunicorn service
3. Use `sudo systemctl start nginx` and `sudo systemctl enable nginx` to enable nginx service
4. Run using `python3 lslserver.py`
5. When finished, ensure that both nginx and gunicorn services are stopped using `sudo systemctl stop helloworld` and `sudo systemctl stop nginx`
